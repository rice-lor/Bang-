<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bang! Online</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=IM+Fell+English+SC&family=Rye&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Rye', cursive;
            background-color: #f5deb3; /* Parchment */
            background-image: url('https://www.transparenttextures.com/patterns/wood-pattern.png');
        }
        .font-bang {
            font-family: 'IM Fell English SC', serif;
        }
        .card {
            border: 2px solid #8B4513; /* SaddleBrown */
            background-color: #F5F5DC; /* Beige */
            border-radius: 10px;
            box-shadow: 3px 3px 5px rgba(0,0,0,0.5);
            transition: transform 0.2s, box-shadow 0.2s;
            position: relative;
            overflow: hidden;
            width: 100px;
            height: 140px;
        }
        .card:hover {
            transform: translateY(-10px) scale(1.05);
            box-shadow: 5px 10px 15px rgba(0,0,0,0.5);
        }
        .player-area {
            border: 3px solid #8B4513;
            background-color: rgba(210, 180, 140, 0.7); /* Tan with transparency */
            border-radius: 10px;
            padding: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.5) inset;
            position: relative;
        }
        .player-area.active-player {
            border-color: #FFD700; /* Gold */
            box-shadow: 0 0 20px rgba(255, 215, 0, 0.8) inset, 0 0 15px rgba(255, 215, 0, 0.8);
        }
        .bullet {
            width: 20px;
            height: 20px;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><path fill="%238B4513" d="M50 0 L60 20 L55 20 L55 80 L60 80 L50 100 L40 80 L45 80 L45 20 L40 20 Z" /><path fill="%23FFD700" d="M50 10 L55 25 L52 25 L52 75 L55 75 L50 90 L45 75 L48 75 L48 25 L45 25 Z" /></svg>');
            background-size: contain;
            background-repeat: no-repeat;
            background-position: center;
        }
        .game-log {
            background-color: rgba(0,0,0,0.7);
            color: white;
            border-radius: 5px;
            padding: 10px;
            height: 150px;
            overflow-y: scroll;
            border: 2px solid #4a2c12;
            font-family: monospace;
            font-size: 0.8rem;
        }
         /* Modal styles */
        .modal-backdrop {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 50;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #f5deb3;
            border: 5px solid #8B4513;
            border-radius: 15px;
            padding: 2rem;
            z-index: 60;
            box-shadow: 0 0 30px rgba(0,0,0,0.7);
            text-align: center;
            max-width: 90%;
            width: 500px;
        }
    </style>
</head>
<body class="bg-tan-100 text-gray-800">

    <div id="game-container" class="container mx-auto p-4 max-w-7xl hidden">
        
        <!-- Other Players -->
        <div id="other-players-container" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 mb-4">
            <!-- Other player templates will be inserted here -->
        </div>

        <!-- Central Table -->
        <div class="flex justify-center items-center space-x-8 my-8">
            <div>
                <div id="deck-pile" class="card flex items-center justify-center text-center font-bold text-lg cursor-pointer transform hover:scale-105 transition-transform">
                    BANG!<br/><span id="deck-count" class="text-sm"></span>
                </div>
                <p class="text-center mt-2">Deck</p>
            </div>
            <div>
                <div id="discard-pile" class="card flex items-center justify-center text-center">
                   <!-- Last discarded card will be shown here -->
                </div>
                 <p class="text-center mt-2">Discard</p>
            </div>
            <div id="game-log-container" class="w-1/2">
                 <p class="text-center mb-2">Game Log</p>
                <div id="game-log" class="game-log"></div>
            </div>
        </div>

        <!-- Current Player -->
        <div id="current-player-area" class="fixed bottom-0 left-0 right-0 bg-black bg-opacity-50 p-4">
             <div class="player-area" id="main-player-div">
                <div class="flex justify-between items-start">
                    <div>
                        <h2 id="player-name" class="text-2xl font-bold">Player Name</h2>
                        <p id="player-character" class="text-lg font-bang">Character Name</p>
                        <p id="player-role" class="italic text-sm">Role: Sheriff</p>
                        <p id="turn-phase-indicator" class="font-bold text-yellow-200 mt-1"></p>
                    </div>
                    <div id="player-health" class="flex items-center space-x-1">
                        <!-- Bullets for health -->
                    </div>
                </div>
                <div class="flex mt-2 space-x-4">
                    <div id="player-hand-container" class="flex-1 flex space-x-2 items-end h-[160px]">
                        <!-- Player's cards in hand -->
                    </div>
                    <div class="flex flex-col items-center space-y-2">
                        <button id="end-turn-btn" class="bg-red-800 text-white font-bold py-2 px-4 rounded hover:bg-red-900 transition-colors disabled:opacity-50 disabled:cursor-not-allowed">End Turn</button>
                        <p class="text-xs text-white">Your ID: <span id="user-id-display"></span></p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Lobby -->
    <div id="lobby-container" class="container mx-auto p-8 text-center">
        <h1 class="text-6xl font-rye mb-4">Bang! Online</h1>
        <p class="mb-8 font-bang text-xl">The Wild West Card Game</p>
        
        <div class="max-w-md mx-auto bg-tan-200 p-6 rounded-lg shadow-lg border-4 border-yellow-800">
            <div class="mb-4">
                <label for="game-id-input" class="block mb-2">Game ID:</label>
                <input type="text" id="game-id-input" class="p-2 rounded w-full border-2 border-yellow-700 bg-beige" placeholder="Enter Game ID or leave blank for new">
            </div>
            <div class="mb-4">
                <label for="player-name-input" class="block mb-2">Your Name:</label>
                <input type="text" id="player-name-input" class="p-2 rounded w-full border-2 border-yellow-700 bg-beige" placeholder="E.g., Cactus Jack">
            </div>
            <button id="join-game-btn" class="bg-green-800 text-white font-bold py-2 px-4 rounded hover:bg-green-900 transition-colors w-full disabled:opacity-50" disabled>Authenticating...</button>
        </div>
        
        <div id="lobby-players" class="mt-8 max-w-md mx-auto">
            <h3 class="text-2xl mb-4">Players in Lobby</h3>
            <ul id="lobby-player-list" class="list-disc list-inside bg-tan-200 p-4 rounded-lg border-2 border-yellow-700">
                <!-- Player list -->
            </ul>
            <button id="start-game-btn" class="bg-blue-800 text-white font-bold py-2 px-4 rounded hover:bg-blue-900 transition-colors mt-4 hidden">Start Game (Min 4 Players)</button>
        </div>
    </div>
    
    <!-- Modals -->
    <div id="role-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h2 class="text-3xl font-bang mb-4">Your Role is...</h2>
            <div id="role-reveal-card" class="w-40 h-60 mx-auto border-4 border-yellow-800 rounded-lg p-4 flex flex-col justify-center items-center bg-beige">
                <p id="role-name" class="text-4xl"></p>
                <p id="role-description" class="mt-4 text-sm"></p>
            </div>
            <button id="close-role-modal-btn" class="mt-6 bg-yellow-700 text-white font-bold py-2 px-4 rounded hover:bg-yellow-800">Got it!</button>
        </div>
    </div>

    <div id="target-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <h2 id="target-modal-title" class="text-2xl font-bang mb-4">Select a Target</h2>
            <div id="target-player-list" class="grid grid-cols-2 gap-4"></div>
            <button id="cancel-target-btn" class="mt-6 bg-gray-500 text-white font-bold py-2 px-4 rounded hover:bg-gray-600">Cancel</button>
        </div>
    </div>

    <div id="info-modal" class="modal-backdrop hidden">
        <div class="modal-content">
            <p id="info-modal-text" class="text-lg"></p>
            <button id="close-info-modal-btn" class="mt-6 bg-yellow-700 text-white font-bold py-2 px-4 rounded hover:bg-yellow-800">OK</button>
        </div>
    </div>


    <script type="module">
        // Firebase Imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, onSnapshot, updateDoc, arrayUnion, runTransaction } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getFunctions, httpsCallable } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-functions.js";

        // Firebase Config (will be provided by the environment)
        const firebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : { apiKey: "AIza...", authDomain: "...", projectId: "..." };
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-bang-app';

        // Initialize Firebase
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);
        const auth = getAuth(app);
        const functions = getFunctions(app);
        
        // --- Cloud Function Stubs ---
        // These functions will call our secure backend.
        const startGame = httpsCallable(functions, 'startGame');
        const performAction = httpsCallable(functions, 'performAction');


        // Game state variables
        let userId;
        let currentGameId = null;
        let gameState = null;
        let unsubscribeGame = null;

        // UI Elements
        const lobbyContainer = document.getElementById('lobby-container');
        const gameContainer = document.getElementById('game-container');
        const joinGameBtn = document.getElementById('join-game-btn');
        const gameIdInput = document.getElementById('game-id-input');
        const playerNameInput = document.getElementById('player-name-input');
        const lobbyPlayerList = document.getElementById('lobby-player-list');
        const startGameBtn = document.getElementById('start-game-btn');
        const userIdDisplay = document.getElementById('user-id-display');
        const deckPile = document.getElementById('deck-pile');

        // --- GENERAL UI & MODALS ---
        function showInfoModal(message) {
            document.getElementById('info-modal-text').textContent = message;
            document.getElementById('info-modal').classList.remove('hidden');
        }
        document.getElementById('close-info-modal-btn').addEventListener('click', () => {
            document.getElementById('info-modal').classList.add('hidden');
        });
        document.getElementById('close-role-modal-btn').addEventListener('click', () => {
            document.getElementById('role-modal').classList.add('hidden');
        });
         document.getElementById('cancel-target-btn').addEventListener('click', () => {
            document.getElementById('target-modal').classList.add('hidden');
        });

        // --- AUTHENTICATION ---
        onAuthStateChanged(auth, (user) => {
            if (user) {
                userId = user.uid;
                userIdDisplay.textContent = userId;
                console.log("Authenticated with user ID:", userId);
                joinGameBtn.disabled = false;
                joinGameBtn.textContent = 'Join / Create Game';
            } else {
                signInAnonymously(auth).catch((error) => {
                    console.error("Anonymous sign-in failed:", error);
                });
            }
        });

        // --- LOBBY LOGIC ---
        joinGameBtn.addEventListener('click', async () => {
            const playerName = playerNameInput.value.trim();
            if (!playerName) {
                showInfoModal("Please enter a name!");
                return;
            }

            let gameId = gameIdInput.value.trim();
            if (!gameId) {
                gameId = `game-${Math.random().toString(36).substr(2, 6)}`;
            }
            
            currentGameId = gameId;
            const gameRef = doc(db, `artifacts/${appId}/public/data/bang_games`, currentGameId);
            
            try {
                const gameDoc = await getDoc(gameRef);

                if (!gameDoc.exists()) {
                    await createNewGame(gameRef, playerName);
                } else {
                    const gameData = gameDoc.data();
                    if (gameData.status !== 'lobby') {
                        showInfoModal('This game has already started!');
                        return;
                    }
                    if (Object.keys(gameData.players).length >= 7) {
                        showInfoModal('This game is full!');
                        return;
                    }
                    const updatePayload = {
                        [`players.${userId}`]: { name: playerName, status: 'active' }
                    };
                    await updateDoc(gameRef, updatePayload);
                }
                subscribeToGame(currentGameId);
            } catch (error) {
                console.error("Error joining game: ", error);
                showInfoModal("Could not join game. See console for details.");
            }
        });
        
        async function createNewGame(gameRef, playerName) {
            const newGame = {
                status: 'lobby',
                hostId: userId,
                players: {
                    [userId]: { name: playerName, status: 'active' }
                },
                createdAt: new Date(),
            };
            await setDoc(gameRef, newGame);
        }

        function subscribeToGame(gameId) {
            const gameRef = doc(db, `artifacts/${appId}/public/data/bang_games`, gameId);
            unsubscribeGame = onSnapshot(gameRef, (doc) => {
                if (doc.exists()) {
                    gameState = doc.data();
                    updateUI(gameState);
                } else {
                    showInfoModal("The game has ended or could not be found.");
                    resetToLobby();
                }
            });
        }
        
        function updateUI(state) {
            if (state.status === 'lobby') {
                showLobby(state);
            } else if (state.status === 'playing' || state.status === 'gameover') {
                showGame(state);
            }
        }
        
        function showLobby(state) {
            lobbyContainer.classList.remove('hidden');
            gameContainer.classList.add('hidden');
            
            lobbyPlayerList.innerHTML = '';
            const playerIds = Object.keys(state.players);
            playerIds.forEach(pid => {
                const player = state.players[pid];
                const li = document.createElement('li');
                li.textContent = player.name;
                if (pid === userId) li.textContent += " (You)";
                if (pid === state.hostId) li.textContent += " [Host]";
                lobbyPlayerList.appendChild(li);
            });

            if (userId === state.hostId) {
                startGameBtn.classList.remove('hidden');
                if (playerIds.length >= 4) {
                    startGameBtn.disabled = false;
                    startGameBtn.textContent = 'Start Game';
                } else {
                    startGameBtn.disabled = true;
                    startGameBtn.textContent = `Need ${4 - playerIds.length} more player(s)`;
                }
            }
        }
        
        function resetToLobby() {
            if (unsubscribeGame) unsubscribeGame();
            unsubscribeGame = null;
            currentGameId = null;
            gameState = null;
            lobbyContainer.classList.remove('hidden');
            gameContainer.classList.add('hidden');
            gameIdInput.value = '';
            lobbyPlayerList.innerHTML = '';
            startGameBtn.classList.add('hidden');
        }

        startGameBtn.addEventListener('click', async () => {
             if (!currentGameId || userId !== gameState.hostId) return;
             startGameBtn.disabled = true;
             startGameBtn.textContent = 'Starting...';
             try {
                await startGame({ gameId: currentGameId });
                // The onSnapshot listener will handle the UI update
             } catch (error) {
                 console.error("Error starting game:", error);
                 showInfoModal(`Error starting game: ${error.message}`);
                 startGameBtn.disabled = false;
                 startGameBtn.textContent = 'Start Game';
             }
        });

        // --- GAME UI RENDERING ---
        function showGame(state) {
            lobbyContainer.classList.add('hidden');
            gameContainer.classList.remove('hidden');

            const myPlayer = state.players[userId];
            if (!myPlayer) return;
            
            if (!myPlayer.roleShown) {
                showRoleModal(myPlayer.role);
                // The backend should handle setting this flag
                performAction({ gameId: currentGameId, action: { type: 'ACKNOWLEDGE_ROLE' }});
            }

            const isMyTurn = state.turnOrder[state.currentTurnIndex] === userId;

            // Render current player
            document.getElementById('player-name').textContent = myPlayer.name + (isMyTurn ? ' (Your Turn)' : '');
            document.getElementById('player-character').textContent = myPlayer.character;
            document.getElementById('player-role').textContent = `Role: ${myPlayer.role === 'Sheriff' ? 'Sheriff' : '???'}`;
            document.getElementById('turn-phase-indicator').textContent = isMyTurn ? `Phase: ${myPlayer.turnPhase}` : '';
            
            const healthContainer = document.getElementById('player-health');
            healthContainer.innerHTML = '';
            for(let i=0; i < myPlayer.maxHealth; i++) {
                const bulletDiv = document.createElement('div');
                bulletDiv.className = 'bullet';
                if (i >= myPlayer.health) bulletDiv.style.opacity = '0.2';
                healthContainer.appendChild(bulletDiv);
            }

            // Render player hand
            const handContainer = document.getElementById('player-hand-container');
            handContainer.innerHTML = '';
            myPlayer.hand.forEach(card => {
                const cardEl = createCardElement(card);
                cardEl.addEventListener('click', () => onCardClick(card));
                handContainer.appendChild(cardEl);
            });
            
            // Render other players
            const otherPlayersContainer = document.getElementById('other-players-container');
            otherPlayersContainer.innerHTML = '';
            state.turnOrder.forEach((pid, index) => {
                if (pid === userId) return;
                const player = state.players[pid];
                const playerDiv = document.createElement('div');
                playerDiv.className = 'player-area';
                if (index === state.currentTurnIndex) playerDiv.classList.add('active-player');

                playerDiv.innerHTML = `
                    <h3 class="font-bold text-lg">${player.name}</h3>
                    <p class="font-bang text-sm">${player.character}</p>
                    <p class="text-xs">${player.hand.length} cards in hand</p>
                    <div class="flex mt-1">
                        ${[...Array(player.maxHealth)].map((_, i) => `<div class="bullet ${i >= player.health ? 'opacity-20' : ''}"></div>`).join('')}
                    </div>
                    ${player.role === 'Sheriff' ? '<p class="text-xs text-blue-800 font-bold">Sheriff</p>' : ''}
                    ${player.status === 'eliminated' ? `<div class="absolute inset-0 bg-black bg-opacity-70 flex items-center justify-center text-red-500 text-3xl font-bold transform -rotate-12">ELIMINATED</div><p class="text-center font-bold mt-2">${player.role}</p>` : ''}
                `;
                otherPlayersContainer.appendChild(playerDiv);
            });
            
            document.getElementById('deck-count').textContent = `${state.deck.length} cards`;
            const discardPileEl = document.getElementById('discard-pile');
            discardPileEl.innerHTML = '';
            if (state.discardPile.length > 0) {
                const topCard = state.discardPile[state.discardPile.length - 1];
                discardPileEl.appendChild(createCardElement(topCard));
            }
            
            const logEl = document.getElementById('game-log');
            logEl.innerHTML = state.log.join('<br>');
            logEl.scrollTop = logEl.scrollHeight;

            document.getElementById('end-turn-btn').disabled = !isMyTurn || myPlayer.turnPhase !== 'PLAY';
        }

        function createCardElement(card) {
            const cardData = ALL_CARDS[card.name];
            const div = document.createElement('div');
            div.className = 'card flex flex-col justify-between p-1 cursor-pointer';
            div.innerHTML = `
                <div class="text-left text-sm font-bold">${card.suit || ''} ${card.value || ''}</div>
                <div class="text-center font-bang text-md">${card.name}</div>
                <div class="text-right text-sm font-bold">${card.suit || ''} ${card.value || ''}</div>
            `;
            if (cardData.color === 'blue') div.style.borderColor = '#0000FF';
            return div;
        }
        
        function showRoleModal(role) {
            const roleData = {
                Sheriff: { color: 'blue', desc: 'Kill all Outlaws and the Renegade.'},
                Deputy: { color: 'blue', desc: 'Protect the Sheriff! Kill all Outlaws and the Renegade.'},
                Outlaw: { color: 'red', desc: 'Kill the Sheriff.'},
                Renegade: { color: 'gray', desc: 'Be the last one standing.'},
            };
            document.getElementById('role-name').textContent = role;
            document.getElementById('role-description').textContent = roleData[role].desc;
            document.getElementById('role-reveal-card').style.borderColor = roleData[role].color;
            document.getElementById('role-modal').classList.remove('hidden');
        }
        
        // --- GAME ACTIONS (Client-side triggers) ---
        deckPile.addEventListener('click', () => {
            const myPlayer = gameState.players[userId];
            const isMyTurn = gameState.turnOrder[gameState.currentTurnIndex] === userId;
            if (isMyTurn && myPlayer.turnPhase === 'DRAW') {
                performAction({ gameId: currentGameId, action: { type: 'DRAW_CARDS' }});
            }
        });

        async function onCardClick(card) {
            const myPlayer = gameState.players[userId];
            const isMyTurn = gameState.turnOrder[gameState.currentTurnIndex] === userId;
            if (!isMyTurn || myPlayer.turnPhase !== 'PLAY') {
                console.log("Not your turn or not in PLAY phase.");
                return;
            }
            
            const cardName = card.name;
            const action = { type: 'PLAY_CARD', cardId: card.id };

            // Determine if a target is needed
            if (['Bang!', 'Panic!', 'Cat Balou', 'Jail', 'Duel'].includes(cardName)) {
                // Simplified target logic. A real implementation needs range checks.
                const targets = gameState.turnOrder.filter(pid => pid !== userId && gameState.players[pid].status === 'active');
                showTargetModal(cardName, targets, (targetId) => {
                    action.targetId = targetId;
                    performAction({ gameId: currentGameId, action });
                });
            } else { // Cards that don't need targets
                performAction({ gameId: currentGameId, action });
            }
        }
        
        function showTargetModal(title, targets, callback) {
            const modal = document.getElementById('target-modal');
            document.getElementById('target-modal-title').textContent = `Select target for ${title}`;
            const targetList = document.getElementById('target-player-list');
            targetList.innerHTML = '';
            
            targets.forEach(pid => {
                const player = gameState.players[pid];
                const btn = document.createElement('button');
                btn.className = 'bg-yellow-700 text-white p-4 rounded hover:bg-yellow-800';
                btn.textContent = player.name;
                btn.onclick = () => {
                    modal.classList.add('hidden');
                    callback(pid);
                };
                targetList.appendChild(btn);
            });
            modal.classList.remove('hidden');
        }

        document.getElementById('end-turn-btn').addEventListener('click', () => {
            const myPlayer = gameState.players[userId];
            if (myPlayer.hand.length > myPlayer.health) {
                showInfoModal(`You must discard down to ${myPlayer.health} cards.`);
                return;
            }
            performAction({ gameId: currentGameId, action: { type: 'END_TURN' }});
        });
        
        // --- GAME DATA DEFINITIONS ---
        // This data can also be stored in Firestore for easier management
        const ALL_CHARACTERS = {
            'bart_cassidy': { name: 'Bart Cassidy', health: 4, ability: 'Each time he is hit, he draws a card from the deck.' },
            'black_jack': { name: 'Black Jack', health: 4, ability: 'During phase 1 of his turn, he must show the second card he draws. If it is a Heart or Diamond, he draws one additional card.' },
            'calamity_janet': { name: 'Calamity Janet', health: 4, ability: 'She can use Bang! cards as Missed! cards and vice-versa.' },
            'el_gringo': { name: 'El Gringo', health: 3, ability: 'Each time he is hit by a player, he draws a card from the hand of that player.' },
            'jourdonnais': { name: 'Jourdonnais', health: 4, ability: 'He has a Barrel in play at all times.' },
            'kit_carlson': { name: 'Kit Carlson', health: 4, ability: 'During phase 1 of his turn, he looks at the top three cards of the deck, chooses 2 to draw, and puts the other one back on top of the deck.' },
            'paul_regret': { name: 'Paul Regret', health: 3, ability: 'He has a Mustang in play at all times.' },
            'pedro_ramirez': { name: 'Pedro Ramirez', health: 4, ability: 'During the first phase of his turn, he may choose to draw the first card from the top of the discard pile or from the deck.' },
            'rose_doolan': { name: 'Rose Doolan', health: 4, ability: 'She has a Scope in play at all times.' },
            'sid_ketchum': { name: 'Sid Ketchum', health: 4, ability: 'At any time, he may discard 2 cards from his hand to regain one life point.' },
            'slab_the_killer': { name: 'Slab the Killer', health: 4, ability: 'Players trying to cancel his Bang! cards need to play 2 Missed!.' },
            'suzy_lafayette': { name: 'Suzy Lafayette', health: 4, ability: 'As soon as she has no cards in her hand, she draws a card from the deck.' },
            'vulture_sam': { name: 'Vulture Sam', health: 4, ability: 'Whenever a player is eliminated from the game, Sam takes all the cards that player had in his hand and in play.' },
            'willy_the_kid': { name: 'Willy the Kid', health: 4, ability: 'He can play any number of Bang! cards during his turn.' }
        };

        const ALL_CARDS = {
            'Bang!': { count: 25, color: 'brown' }, 'Missed!': { count: 12, color: 'brown' }, 'Beer': { count: 6, color: 'brown' }, 'Panic!': { count: 4, color: 'brown' },
            'Cat Balou': { count: 4, color: 'brown' }, 'Stagecoach': { count: 2, color: 'brown' }, 'Wells Fargo': { count: 1, color: 'brown' }, 'Gatling': { count: 1, color: 'brown' },
            'Indians!': { count: 2, color: 'brown' }, 'Duel': { count: 3, color: 'brown' }, 'Saloon': { count: 1, color: 'brown' }, 'Schofield': { count: 3, color: 'blue' },
            'Remington': { count: 1, color: 'blue' }, 'Rev. Carabine': { count: 1, color: 'blue' }, 'Winchester': { count: 1, color: 'blue' }, 'Volcanic': { count: 2, color: 'blue' },
            'Scope': { count: 1, color: 'blue' }, 'Mustang': { count: 2, color: 'blue' }, 'Barrel': { count: 2, color: 'blue' }, 'Jail': { count: 3, color: 'blue' },
            'Dynamite': { count: 1, color: 'blue' },
        };

    </script>
</body>
</html>

